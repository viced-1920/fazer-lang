webhook := "https://canary.discord.com/api/webhooks/1463728147202838652/vEd4MqqtYmAFg15GKX3FBxLYS1XImycormdOMwTa3Dbwcm6r8lYI3dfIWlZiLH2Dxq9e"

print("Lecture du fichier announce_embed.json...")
raw_json := fs_read("announce_embed.json")

if raw_json == null ->
    print("Erreur: Impossible de lire announce_embed.json")
    # exit? no exit builtin yet, just stop
end
else ->
    embed_data := json_parse(raw_json)
    
    payload := {
        "embeds": [embed_data]
    }
    
    print("Envoi du payload vers Discord...")
    
    # Debug: print payload to be sure
    # print(json_stringify(payload))
    
    res := http_req(webhook, {
        "method": "POST",
        "headers": { "Content-Type": "application/json" },
        "body": json_stringify(payload)
    })
    
    print("Status: " + res.status)
    if res.status >= 200 and res.status < 300 ->
        print("✅ Notification envoyée avec succès !")
    end
    else ->
        print("❌ Erreur lors de l'envoi : " + res.body)
    end
end
